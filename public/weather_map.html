<!DOCTYPE html>
<html>
<head>
    <title>Weather in San Antonio</title>
    <meta charset="utf=8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <style>
        #map-space{
            width:600px;
            height:400px;
        }
    </style>
</head>
<body>
<div class="container-fluid">
    <div class="row">
        <div class="col-md-4" id="current-conditions-1">


        </div>
        <div class="col-md-4" id="current-conditions-2">

        </div>
        <div class="col-md-4" id="current-conditions-3">

        </div>
    </div>

    <!-- Map in this row below -->
    <div class="row">
        <div class="col-md-12" id="map-space">
            
        </div>
    </div>
</div>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCEvzFqeOuQEyxPrW-drYZ0ORhWdffEs_w"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
<script>
(function() {

// map beginning coordinates
var coordinates = {lat: 29.426791, lng: -98.489602}

// set map options
var mapOptions = {
    zoom: 8,
    center: coordinates,
    mapTypeId: google.maps.MapTypeId.HYBRID
    }


// render the map
var map = new google.maps.Map(document.getElementById("map-space"), mapOptions);

// set map marker
var marker = new google.maps.Marker({
    position: coordinates,
    map: map,
    draggable:true
});

// listen for movement of marker
marker.addListener("dragend", function() {
    coordinates = marker.getPosition();
    map.panTo(marker.getPosition());
    console.log("new position: " + coordinates + typeof coordinates);
});

// get Weather API
$.get("http://api.openweathermap.org/data/2.5/forecast/daily", {
    APPID: "1a2500a8754b15cdaa2e73a0b2b3b26e",
    // q: "San Antonio, TX",
    lat: coordinates.lat,
    lon: coordinates.lng,
    units: "imperial",
    cnt: 3
}).done(function(data) {
    console.log(data);
    // create variables for each of three days
    for(var i=0; i < data.list.length; i++) {
    var morn = data.list[i].temp.morn;
    var max = data.list[i].temp.max;
    var night = data.list[i].temp.night;
    var weatherIcon = data.list[i].weather.icon;
    var weatherCode = data.list[i].weather.id;
    var weatherDesc = data.list[i].weather.main;
    // figure out the days in the box/infowindow, whatever
    var d = new Date();
    var daysArray = new Array(7);
    daysArray[0]= "Sunday";
    daysArray[1]= "Monday";
    daysArray[2]= "Tuesday";
    daysArray[3]= "Wednesday";
    daysArray[4]= "Thursday";
    daysArray[5]= "Friday";
    daysArray[6]= "Saturday";
    var weekday = daysArray[d.getDay()+i];
    

    console.log(weekday);
    };
    // get day


    var box;
    

    
});






})();
</script>
</body>
</html>